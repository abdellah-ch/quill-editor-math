{"version":3,"file":"index.js","sources":["../src/components/QuillEditor.jsx","../src/components/Editor.jsx","../src/index.js"],"sourcesContent":["import $ from 'jquery'\nimport katex from 'katex'\nimport React from 'react'\nimport ReactQuill, { Quill } from 'react-quill'\nimport ImageResize from 'quill-image-resize-module-react'\n\nlet mathquill4quill\nif (typeof window !== 'undefined') {\n  window.katex = katex\n  window.jQuery = window.$ = $\n  mathquill4quill = require('mathquill4quill')\n  require('@edtr-io/mathquill/build/mathquill.js')\n}\n\nQuill.register('modules/imageResize', ImageResize)\n\nclass QuillEditor extends React.Component {\n  constructor(props) {\n    super(props)\n    this.reactQuill = React.createRef()\n    this.state = {\n      editorHtml: this.props.initialValue,\n      theme: 'snow',\n      placeholder: 'Write something...'\n    }\n    this.attachQuillRefs = this.attachQuillRefs.bind(this)\n  }\n\n  componentDidMount() {\n    this.attachQuillRefs()\n    console.log(this.props.initialValue)\n  }\n\n  componentDidUpdate(prevProps) {\n    // do something\n    if (prevProps.initialValue === '') {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({\n        editorHtml: this.props.initialValue\n      })\n    }\n  }\n\n  attachQuillRefs() {\n    const enableMathQuillFormulaAuthoring = mathquill4quill({ Quill, katex })\n    enableMathQuillFormulaAuthoring(this.reactQuill.current.editor, {\n      operators: [\n        ['\\\\pm', '\\\\pm'],\n        ['\\\\sqrt{x}', '\\\\sqrt'],\n        ['\\\\sqrt[3]{x}', '\\\\sqrt[3]{}'],\n        ['\\\\sqrt[n]{x}', '\\\\nthroot'],\n        ['\\\\frac{x}{y}', '\\\\frac'],\n        ['\\\\sum^{s}_{x}{d}', '\\\\sum'],\n        ['\\\\prod^{s}_{x}{d}', '\\\\prod'],\n        ['\\\\coprod^{s}_{x}{d}', '\\\\coprod'],\n        ['\\\\int^{s}_{x}{d}', '\\\\int'],\n        ['\\\\binom{n}{k}', '\\\\binom']\n      ],\n      displayHistory: true\n    })\n  }\n\n  render() {\n    return (\n      <ReactQuill\n        ref={this.reactQuill}\n        modules={{\n          formula: true,\n          toolbar: [\n            ['bold', 'italic', 'underline', 'strike'], // toggled buttons\n            ['blockquote', 'code-block'],\n\n            [{ list: 'ordered' }, { list: 'bullet' }],\n            [{ script: 'sub' }, { script: 'super' }], // superscript/subscript\n            [{ header: [1, 2, 3, false] }],\n\n            ['link', 'image', 'formula'],\n\n            [{ color: [] }, { background: [] }], // dropdown with defaults from theme\n            [{ align: [] }],\n\n            ['clean'] // remove formatting button\n          ],\n          clipboard: {\n            // toggle to add extra line breaks when pasting HTML:\n            matchVisual: false\n          },\n          imageResize: {\n            parchment: Quill.import('parchment'),\n            modules: ['Resize', 'DisplaySize']\n          }\n        }}\n        value={this.state.editorHtml}\n        theme='snow'\n        placeholder='Compose an epic ...'\n        bounds='.quill'\n      />\n    )\n  }\n}\n\nexport default QuillEditor\n","import React from 'react'\nimport QuillEditor from './QuillEditor'\nimport 'katex/dist/katex.min.css'\nimport '@edtr-io/mathquill/build/mathquill.css'\nimport 'mathquill4quill/mathquill4quill.css'\nimport 'react-quill/dist/quill.snow.css'\n\nconst Editor = (props) => {\n  return <QuillEditor {...props} />\n}\n\nexport default Editor\n","import React from 'react'\nimport Editor from './components/Editor'\n\nexport const QuillEditor = ({ initialValue }) => {\n  return <Editor initialValue={initialValue} />\n}\n"],"names":["mathquill4quill","window","katex","jQuery","$","require","Quill","register","ImageResize","QuillEditor","props","reactQuill","React","createRef","state","editorHtml","initialValue","theme","placeholder","attachQuillRefs","bind","componentDidMount","console","log","componentDidUpdate","prevProps","setState","enableMathQuillFormulaAuthoring","current","editor","operators","displayHistory","render","ReactQuill","formula","toolbar","list","script","header","color","background","align","clipboard","matchVisual","imageResize","parchment","modules","Component","Editor"],"mappings":"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"}