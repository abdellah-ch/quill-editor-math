{"version":3,"file":"index.modern.js","sources":["../src/components/QuillEditor.tsx","../src/components/Editor.tsx","../src/index.tsx"],"sourcesContent":["import $ from 'jquery'\nimport katex from 'katex'\nimport React from 'react'\nimport ReactQuill, { Quill } from 'react-quill'\n// @ts-ignore\nimport ImageResize from 'quill-image-resize-module-react'\n\nlet mathquill4quill: (arg0: { Quill: typeof Quill; katex: any }) => any\nif (typeof window !== 'undefined') {\n  // @ts-ignore\n  window.katex = katex\n  // @ts-ignore\n  window.jQuery = window.$ = $\n  mathquill4quill = require('mathquill4quill')\n  require('@edtr-io/mathquill/build/mathquill.js')\n}\n\nQuill.register('modules/imageResize', ImageResize)\n\nclass QuillEditor extends React.Component {\n  constructor(props: {} | Readonly<{}>) {\n    super(props)\n    // @ts-ignore\n    this.reactQuill = React.createRef()\n    this.state = {\n      // @ts-ignore\n      editorHtml: this.props.initialValue,\n      theme: 'snow',\n      placeholder: 'Write something...'\n    }\n    this.attachQuillRefs = this.attachQuillRefs.bind(this)\n  }\n\n  componentDidMount() {\n    this.attachQuillRefs()\n  }\n\n  componentDidUpdate(prevProps: { initialValue: string }) {\n    // do something\n    if (prevProps.initialValue === '') {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({\n        // @ts-ignore\n        editorHtml: this.props.initialValue\n      })\n    }\n  }\n\n  attachQuillRefs() {\n    const enableMathQuillFormulaAuthoring = mathquill4quill({ Quill, katex })\n    // @ts-ignore\n    enableMathQuillFormulaAuthoring(this.reactQuill.current.editor, {\n      operators: [\n        ['\\\\pm', '\\\\pm'],\n        ['\\\\sqrt{x}', '\\\\sqrt'],\n        ['\\\\sqrt[3]{x}', '\\\\sqrt[3]{}'],\n        ['\\\\sqrt[n]{x}', '\\\\nthroot'],\n        ['\\\\frac{x}{y}', '\\\\frac'],\n        ['\\\\sum^{s}_{x}{d}', '\\\\sum'],\n        ['\\\\prod^{s}_{x}{d}', '\\\\prod'],\n        ['\\\\coprod^{s}_{x}{d}', '\\\\coprod'],\n        ['\\\\int^{s}_{x}{d}', '\\\\int'],\n        ['\\\\binom{n}{k}', '\\\\binom']\n      ],\n      displayHistory: true\n    })\n  }\n\n  render() {\n    return (\n      // @ts-ignore\n      <ReactQuill\n        // @ts-ignore\n        ref={this.reactQuill}\n        modules={{\n          formula: true,\n          toolbar: [\n            ['bold', 'italic', 'underline', 'strike'], // toggled buttons\n            ['blockquote', 'code-block'],\n\n            [{ list: 'ordered' }, { list: 'bullet' }],\n            [{ script: 'sub' }, { script: 'super' }], // superscript/subscript\n            [{ header: [1, 2, 3, false] }],\n\n            ['link', 'image', 'formula'],\n\n            [{ color: [] }, { background: [] }], // dropdown with defaults from theme\n            [{ align: [] }],\n\n            ['clean'] // remove formatting button\n          ],\n          clipboard: {\n            // toggle to add extra line breaks when pasting HTML:\n            matchVisual: false\n          },\n          imageResize: {\n            parchment: Quill.import('parchment'),\n            modules: ['Resize', 'DisplaySize']\n          }\n        }}\n        // @ts-ignore\n        value={this.state.editorHtml}\n        theme='snow'\n        placeholder='Compose an epic ...'\n        bounds='.quill'\n      />\n    )\n  }\n}\n\nexport default QuillEditor\n","import React from 'react'\nimport QuillEditor from './QuillEditor'\nimport 'katex/dist/katex.min.css'\nimport '@edtr-io/mathquill/build/mathquill.css'\nimport 'mathquill4quill/mathquill4quill.css'\nimport 'react-quill/dist/quill.snow.css'\n\nexport interface IEditor {\n  initialValue: string\n}\nconst Editor: React.FC<IEditor> = (props) => {\n  return <QuillEditor {...props} />\n}\n\nexport default Editor\n","import * as React from 'react'\nimport Editor from './components/Editor'\n\ninterface Props {\n  initialValue: string\n}\n\nexport const QuillEditor = ({ initialValue }: Props) => {\n  return <Editor initialValue={initialValue} />\n}\n"],"names":["mathquill4quill","window","katex","jQuery","$","require","Quill","register","ImageResize","QuillEditor","props","reactQuill","React","createRef","state","editorHtml","initialValue","theme","placeholder","attachQuillRefs","bind","componentDidMount","componentDidUpdate","prevProps","setState","enableMathQuillFormulaAuthoring","current","editor","operators","displayHistory","render","ReactQuill","ref","modules","formula","toolbar","list","script","header","color","background","align","clipboard","matchVisual","imageResize","parchment","value","bounds","Component","Editor"],"mappings":"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"}